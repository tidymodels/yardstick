<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>NA • yardstick</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png"><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><link href="deps/Source_Sans_Pro-0.4.2/font.css" rel="stylesheet"><link href="deps/Source_Code_Pro-0.4.2/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="NA"><meta property="og:image" content="https://yardstick.tidymodels.org/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="yardstick.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">yardstick</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/metric-types.html">Metric types</a>
    <a class="dropdown-item" href="articles/multiclass.html">Multiclass averaging</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-learn-more">Learn more</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-learn-more">
    <a class="external-link dropdown-item" href="https://www.tidymodels.org/learn/develop/metrics/">Custom performance metrics</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tidymodels/yardstick/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-title-body" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="logo.png" class="logo" alt=""><h1>NA</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/yardstick/blob/HEAD/MAINTENANCE.md" class="external-link"><code>MAINTENANCE.md</code></a></small>
    </div>


<div class="section level2">
<h2 id="current-state">Current state<a class="anchor" aria-label="anchor" href="#current-state"></a></h2>
<p>yardstick has reached 1.0.0 status and is stable. For the majority of users, there are 3 types of metrics, each of which has an internal class that is defined through <code>new_metric()</code>:</p>
<ul><li><p>Numeric metrics</p></li>
<li><p>Class metrics</p></li>
<li><p>Class probability metrics</p></li>
</ul><p>yardstick is a bit unique in that the actual functions it exports, like <code><a href="reference/accuracy.html">accuracy()</a></code>, have extra classes and attributes attached to them. This allows them to be used in <code><a href="reference/metric_set.html">metric_set()</a></code>, which has to decide whether or not two metric functions are allowed to be combined in the same metric set or not. For example, two numeric metric functions can be combined, but you can’t combine a numeric metric with a class metric. The only exception here is that you can combine a class metric with a class probability metric - in the resulting function you get back from <code><a href="reference/metric_set.html">metric_set()</a></code>, the class metric will use the <code>estimate</code> interface and the class probability metric will use the <code>…</code> one.</p>
<p>For the current public facing API, I don’t see any major changes needing to be made. I’m fairly happy with how the 3 core metric classes work. I think most of the work for yardstick could be done on improving the internal helpers (see below in Known issues), or with extending yardstick with new metric class types (see Future directions). It is likely that the internal helpers will have to be improved first before you can add new metric class types, because they are quite complex as it is, making extending yardstick fairly difficult.</p>
</div>
<div class="section level2">
<h2 id="known-issues">Known issues<a class="anchor" aria-label="anchor" href="#known-issues"></a></h2>
<p>The main issue with yardstick is that changing any of the underlying infrastructure has a high cognitive overhead. Adding new metrics that fit nicely into the system is really easy, but changing or extending the system is quite hard. For example, the <code><a href="reference/metric_summarizer.html">metric_summarizer()</a></code> is really a rather complicated call to <code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">dplyr::summarize()</a></code>. Extending this to support something new in, say, class metrics, can be difficult because all the numeric metrics also go through this function, and you need to be careful you don’t accidentally break something there. It might be worth creating different kinds of summarizer helpers, possibly one per major class of metric (class, class prob, numeric, maybe survival), and then deprecating the existing one. That way you can add features to a particular metric type without worrying about the others. Remember that <code><a href="reference/metric_summarizer.html">metric_summarizer()</a></code> is currently exported and people have written custom metrics using it.</p>
<p>There is a very similar problem with <code><a href="reference/metric_vec_template.html">metric_vec_template()</a></code>. It currently tries to handle validation and function calling for <em>all</em> of the different types of metrics. This makes it extremely complex, hard to extend, and probably a bit brittle. In particular <code>validate_truth_estimate_checks()</code> does some fairly complex S3 dispatch to perform its validation (kind of a home grown double dispatch on <code>truth</code> and <code>estimate</code>) which might be able to be rewritten in a cleaner way if we had separate <code><a href="reference/metric_vec_template.html">metric_vec_template()</a></code> functions for the different kinds of metric types.</p>
<p>There are a few issues where this high cognitive overhead comes into play, making it hard to add these features:</p>
<ul><li><p><a href="https://github.com/tidymodels/yardstick/issues/311" class="external-link uri">https://github.com/tidymodels/yardstick/issues/311</a></p></li>
<li><p><a href="https://github.com/tidymodels/yardstick/issues/305" class="external-link uri">https://github.com/tidymodels/yardstick/issues/305</a></p></li>
<li><p><a href="https://github.com/tidymodels/yardstick/issues/251" class="external-link uri">https://github.com/tidymodels/yardstick/issues/251</a></p></li>
</ul><p>The complexity of <code>validate_truth_estimate_checks()</code> could be reduced by instead creating a few <code>check_*()</code> helpers that we force the metric writers to call themselves. If we provide useful ones, then they would just call them in their <code>metric_vec()</code> function themselves and we’d avoid the double dispatch altogether because they’d be in charge of calling the correct <code>check_*()</code> function based on the type of <code>truth</code> and <code>estimate</code> that their metric works with. Something like <code>check_factor_truth_factor_estimate(truth, estimate)</code>. That would probably help with #305.</p>
</div>
<div class="section level2">
<h2 id="future-directions">Future directions<a class="anchor" aria-label="anchor" href="#future-directions"></a></h2>
<ul><li><p>We’d like to officially hard deprecate support for <code>yardstick.event_first</code>, a global option that has been soft deprecated for awhile in favor of an explicit <code>event_level</code> argument. You should definitely run revdeps after removing it, but I would be fairly aggressive about getting rid of it at this point. You can probably remove it in the next minor release. <a href="https://github.com/tidymodels/yardstick/issues/173" class="external-link uri">https://github.com/tidymodels/yardstick/issues/173</a></p></li>
<li><p>A number of people seem interested in calibration metrics and calibration curves. This might be combined with the probably package in some way <a href="https://github.com/tidymodels/yardstick/issues/150" class="external-link uri">https://github.com/tidymodels/yardstick/issues/150</a>.</p></li>
<li><p>Fairness metrics seem fairly popular and might fit in yardstick, but we don’t have a clear sense of how they’d be implemented. <a href="https://github.com/tidymodels/yardstick/issues/176" class="external-link uri">https://github.com/tidymodels/yardstick/issues/176</a></p></li>
<li>
<p>We know that we want to add survival metrics to yardstick at some point. There is a POC pull request that adds some of the basic infrastructure, but it isn’t fully fleshed out <a href="https://github.com/tidymodels/yardstick/pull/222" class="external-link uri">https://github.com/tidymodels/yardstick/pull/222</a>. Adding this to yardstick is a bit challenging for a few reasons:</p>
<ul><li><p>What metrics do we actually care about adding? It isn’t entirely clear if we have a list of metrics we really care about. I think it will be critical to scope our survival support narrowly, for example, the PR only supports right censoring right now. Trying to add everything at once will be hard.</p></li>
<li><p>What does the API for this look like? Right now, there is a well-defined API for how yardstick functions work. Most of them take <code>truth</code> and <code>estimate</code> vectors, which are columns in a data frame. The probability metrics take <code>…</code> instead of a single <code>estimate</code> column when they need to supply multiple estimate columns. For survival metrics, things are a bit more complex because we have to consider the censorship aspect. The PR linked above requires that <code>truth</code> be a <code>Surv</code> object, which has the censorship baked into it. For the <code>estimate</code> column, the PR requires that it is a list-of tibbles (the same length as <code>truth</code>), i.e. the output of the <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> function in censored. This makes the API rather complex for normal usage, but I think the goal was to align nicely for usage within tidymodels.</p></li>
<li><p>The metric in the PR is a dummy/naive roc auc curve for survival analysis. I imagine that other “real” survival metrics might need to take some kind of <code>time</code> argument, which would probably be a required argument, which might make the API a little tricky for use with tune and in <code><a href="reference/metric_set.html">metric_set()</a></code>s.</p></li>
<li><p>The metric in the PR also adds a new <code>.time</code> column to the output of the metric. No other yardstick functions have this.</p></li>
<li><p>Because of the special nature of the function signature for survival metrics, and the extra <code>.time</code> column in the output, they probably can’t be combined with non-survival metrics in <code><a href="reference/metric_set.html">metric_set()</a></code>. For this reason, survival metric functions should get their own class, i.e. from <code>new_metric()</code>, and <code><a href="reference/metric_set.html">metric_set()</a></code> should use only allow metrics with that class to be combined together.</p></li>
<li><p>I think the <code>_vec()</code> variant in the PR is a little strange. All other <code>_vec()</code> variants return a single numeric value, but this one would return a data frame. It might just be how this function would have to work, but we might also consider not exporting a <code>_vec()</code> variant for survival metrics.</p></li>
<li><p>The other thing to remember about adding new <code>truth</code> types like <code>Surv</code> is that the validation and estimator helpers will have to gain new S3 methods to handle it. For example <code>finalize_estimator_default()</code> and <code>validate_truth_estimate_types()</code> are internal generics that needed new S3 methods to handle <code>Surv</code> (they are in the PR).</p></li>
</ul></li>
</ul></div>


  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, <a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a>, Emil Hvitfeldt, <a href="https://www.rstudio.com" class="external-link"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" width="72"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

  </div></footer></body></html>

